<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Currency List</title>
    <!-- Import custom stylesheet -->
    <link rel="stylesheet" type="text/css" href="/css/stylesheet.css">
</head>
<body>
    <%- include('partials/navbar', { activePage: '' }) %>
    <h1>Currency Converter</h1>

    <div class="currency-converter">
        <div class="input-group">
            <!-- Input for the Amount-->
            <div class="amount-input">
                <span id="currency-symbol">$</span>
                <input type="number" id="amount" placeholder="Enter amount">
               
            </div>
 
            <!-- List for the From currency -->
            <div class="custom-dropdown" id="from-currency-dropdown">
                <div class="selected">
                    <img src="svgs/us.svg" alt="USD Flag">
                    <span>USD - US Dollar</span>
                </div>
                <ul class="dropdown-list">
                    <% currencies.forEach(currency => { %>
                        <li data-flag="<%= currency.countryCode %>" data-symbol="<%= currency.symbol %>" data-value="<%= currency.code %>">
                            <img src="svgs/<%= currency.countryCode %>.svg" alt="<%= currency.code %> Flag"><%= currency.code %> - <%= currency.name %>
                        </li>
                    <% }) %>
                </ul>
            </div>

            <!-- List for the To currency -->
            <div class="custom-dropdown" id="to-currency-dropdown">
                <div class="selected">
                    <img src="svgs/eu.svg" alt="EUR Flag">
                    <span>EUR - Euro</span>
                </div>
                <ul class="dropdown-list">
                    <% currencies.forEach(currency => { %>
                        <li data-flag="<%= currency.countryCode %>" data-value="<%= currency.code %>">
                            <img src="svgs/<%= currency.countryCode %>.svg" alt="<%= currency.code %> Flag"><%= currency.code %> - <%= currency.name %>
                        </li>
                    <% }) %>
                </ul>
            </div>
        </div>

        <!-- Results of currency conversion to go here -->
        <button id="convert-btn">Convert</button> 
    </div>

    

</body>
</html>
<script src="https://kit.fontawesome.com/7d24bb24b2.js" crossorigin="anonymous"></script>
<!-- Include the JavaScript at the bottom to handle dropdown logic -->
<script>
   // Handle dropdown toggle on click
    const dropdowns = document.querySelectorAll('.custom-dropdown');

    dropdowns.forEach(dropdown => {
        const selected = dropdown.querySelector('.selected');
        const list = dropdown.querySelector('.dropdown-list');

        selected.addEventListener('click', () => {
            // Toggle visibility of the dropdown list
            list.classList.toggle('show');
        });

        // Handle selection of an item
        const items = dropdown.querySelectorAll('li');
        items.forEach(item => {
            item.addEventListener('click', () => {
                const selectedCurrency = item.getAttribute('data-value');
                const selectedFlag = item.getAttribute('data-flag');
                const selectedText = item.textContent.trim();
                const selectedSymbol = item.getAttribute('data-symbol');

                // Update the selected item display
                selected.innerHTML = `<img src="svgs/${selectedFlag}.svg" alt="${selectedCurrency} Flag"> ${selectedText}`;

                // Update the currency symbol next to the amount input
                if (dropdown.id === 'from-currency-dropdown') {
                    document.getElementById('currency-symbol').textContent = selectedSymbol;
                }

                // Close the dropdown after selection
                list.classList.remove('show');
            });
        });
    });

    // Close dropdowns if clicked outside
    document.addEventListener('click', (e) => {
        const isDropdown = e.target.closest('.custom-dropdown');
        if (!isDropdown) {
            document.querySelectorAll('.dropdown-list.show').forEach(list => {
                list.classList.remove('show');
            });
        }
    });
</script>